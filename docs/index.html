<html>

<head>
    <meta charset="utf-8">
    <script src="https://cdn.jsdelivr.net/npm/vue"></script>    
    <script src="https://cdn.jsdelivr.net/npm/@quanzo/vue-step"></script>
    <style>
        .fade-enter-active,
        .fade-leave-active {
            transition: opacity 2s
        }

        .fade-enter,
        .fade-leave-to
        /* .fade-leave-active в версии ниже 2.1.8 */
        {
            opacity: 0
        }
        #stepper{
            width: 30rem;
            height: 20rem;
            margin: 2em auto;
            padding:0;
        }
        #stepper .content{
            width: 30rem;
            height: 20rem;
            position:absolute;
            padding: 0.5em;
        }
        #stepper .content-image img{
            width: auto;
            height: 100%;
        }
        
    </style>
    
</head>

<body>
<div id="stepper">
    <step :auto-start="true" :timeout="7000" name="stepper-slider">
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Mauris auctor non lorem in egestas. Duis ut cursus diam, non mollis
        odio. Aenean at purus eu dolor sodales rhoncus sit amet sit amet enim. Phasellus ultricies mollis orci, et aliquet nibh facilisis
        sed. Praesent luctus interdum metus, mattis dapibus sapien elementum vitae. Maecenas eget nulla posuere, interdum quam a,
        efficitur mauris. Curabitur et quam ut est dictum accumsan. In viverra est sit amet malesuada efficitur. Vivamus purus felis,
        ultrices ac nibh vitae, rutrum tincidunt tortor. Fusce malesuada pharetra tristique. Aenean fringilla convallis euismod.
        Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Pellentesque ullamcorper in ipsum
        tempus malesuada. Pellentesque odio lacus, semper a metus ut, bibendum sodales tortor.</p>
        <hr>
            <button @click="goPrev">Previous</button>
            <button @click="goNext">Next</button>
        <hr>
        <block style="background-color:#f00" name="redblock"></block>
        <block style="background-color:rgb(0, 255, 21)"></block>
        <block style="background-color:rgb(78, 44, 202)" name="blueblock"></block>
        <bimg classes="content content-image" src="https://i.pinimg.com/236x/7a/f3/82/7af3822b23a506bdfcc3b59021fe742f--cat-cat-kitty-cats.jpg"></bimg>
        <bimg classes="content content-image" src="https://data.1freewallpapers.com/thumb/i-m-hungry.jpg" url="http://ya.ru"></bimg>
        <block-content style="background-color:black;color:antiquewhite">
            <h2>Content from block</h2>
            <p>Vestibulum nec orci vel risus ornare tristique. Fusce ac mi maximus, lobortis tellus varius, facilisis nunc. Fusce fermentum
            faucibus lectus, at cursus nisi blandit sit amet. Pellentesque habitant morbi tristique senectus et netus et malesuada fames
            ac turpis egestas. Sed rhoncus neque eget pulvinar lobortis. Nunc fringilla posuere orci, quis egestas ex fermentum non.
            Cras rhoncus hendrerit gravida. In hac habitasse platea dictumst. Ut malesuada blandit ante et mollis. Integer vulputate
            magna non turpis posuere, sed lobortis est interdum. Ut tristique ex ut sagittis sodales. Donec id dolor elementum, malesuada
            augue ut, imperdiet enim.</p>
            <button @click="clicker">Click!</button>
            <button @click="goPrev">Previous!</button>
            <button @click="goNext">Next!</button>
        </block-content>
        <block-load-content url="content.html"></block-load-content>
    </step>
</div>
<script>
    Vue.component("step", VueStep.Step());
    Vue.component("block", VueStep.Test("test-block-2"));
    Vue.component("bimg", VueStep.Image());
    Vue.component("block-content", VueStep.Content());
    Vue.component("block-load-content", VueStep.LoadContent());

    var stepper = new Vue({
            el: "#stepper",
            data: {                
            },
            methods: {
                findByAttr(attributeName, attributeValue) {
                    var idx = this.$children.findIndex(function (e, i, array) {                        
                        if (typeof e.$attrs[attributeName] == "string") {
                            return e.$attrs[attributeName] == attributeValue;
                        }
                        return false;
                    });
                    if (idx != -1) {
                        return this.$children[idx];
                    }
                },
                goNext() {
                    let s = this.findByAttr("name", "stepper-slider");
                    if (s) {
                        s.next();
                    }
                },
                goPrev() {
                    let s = this.findByAttr("name", "stepper-slider");
                    if (s) {
                        s.prev();
                    }
                },
                clicker() {
                    console.log("click!");
                }                
            }
        });
    /***********/
</script>

</body>
</html>
